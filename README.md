# lazy-passwords
Arduino based keyboard/mouse emulator to block screen saver and store/enter passwords

lazy-password performs 2 functions:
* It tries to stop the usual corporate screen saver from locking your session.
* It let you enter quickly pre recorded passwords as they would be typed from a keyboard.

The number of passwords is set to 5.

## Hardware
You need:
1. Arduino leonardo, or similar (atmega32u4).
2. Rotary encoder, ky-040
3. 1602 based LCD (1602 Arduino LCD Keypad Shield), the keys are not used.

## Operation
On start, the device is protected. In order to unlock it, a user has to enter a pin consisting 
of five hex numbers. Default pin is FF FF FF FF 00 and can be changed once unlocked.
Once unlocked, mouse calibration is activated. Observe mouse movement on the screen.
Use rotary to adjust it. Make sure there are no missed steps. Calibration is completed automaticaly
after 5 seconds of inactivity, or by pressing the rotary key.

In normal operation, rotary can be used to select a user name. Pressing the rotary key
triggers corresponding password entry.
Every minute a small mouse movement and shift key press are generated by a device.

## Password Update
In order to record password, you have to first unlock lazy-password.
Next you send a password update command using serial interface.

Prepare a command file containing: ```p<password_idx>:<password>\n\0```
         
For example password000.txt which sets first password to password000:

```
0000000   p   0   :   p   a   s   s   w   o   r   d   0   0   0  \n  \0
         70  30  3a  70  61  73  73  77  6f  72  64  30  30  30  0a  00
```
and execute on command line:

```
sudo sh -c 'cat password000.txt > /dev/ttyACM0'
```
The maximum length of a password is 48 characters.
The ```test``` directory contains numerous examples of files containing password and label update commands.


## Label (username) Update
Similar to password update, label update involves sending a command over a serial interface.

Command file contains: ```l<label_idx>:<label>\0```

For example label000.txt which sets first label to label000:

```
0000000   l   0   :   l   a   b   e   l   0   0   0  \0
         6c  30  3a  6c  61  62  65  6c  30  30  30  00
```
The maximum size of a label is 16 (length of the lcd display).
The ```test``` directory contains numerous examples of files containing password and label update commands.


## Keyboard
lazy-password includes support for 2 keyboard layouts, US and Swiss German. The keyboard layout can
be switched as needed. The default keyboard layout is preserved in EEPROM.

## Security consideration:
The passwords are stored unprotected in EEPROM and can be dumped using standard atmega tools.

## Building
Standard Keyboard and HID require modifications to support CapsLock tracking and non-US keyboard layout.
You have to apply HID and Keyboard patches before sketch can be compiled and uploaded.
